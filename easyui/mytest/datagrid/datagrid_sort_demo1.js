var DatagridSortDemo1 = function () {

    var TRADE_TYPE_ENUM = {
        1: {
            typeName:"净买入",
            typeColor:'rgb(255,0,0)'
        },
        2: {
            typeName:"净卖出",
            typeColor:'rgb(0,200,0)'
        }
    };
    var $tradeListDg = $("#tradeListDg");

    // 获取初始加载页面时的图表数据
    var initChartData = generateChartData1();

    /**
     * 加载列表
     */
    var loadTable = function () {
        $tradeListDg.datagrid({
            fit: false,
            fitColumns: false,
            width: 800,
            striped: true, //设置为true将交替显示行背景。
            columns: [[
                {
                    field: 'ck',
                    checkbox: true
                },
                {
                    field: 'rowNum',
                    title: '序号',
                    width: 40,
                    align: 'center'
                },
                {
                    field: 'tradeDt',
                    title: '交易时间',
                    width: 120,
                    align: 'center'
                },
                {
                    field: 'tradeType',
                    title: '买入/卖出',
                    width: 100,
                    align: 'center',
                    formatter: function (value) {
                        return TRADE_TYPE_ENUM[value].typeName;
                    }
                },
                {
                    field: 'tradeMoney',
                    title: '交易金额(万元)',
                    width: 120,
                    align: 'center',
                    formatter: function (value) {
                        if (value != null) {
                            return (value / 10000).toFixed(0)
                        }
                    }
                },
                {
                    field: 'closePrice',
                    title: '交易指数收盘价',
                    width: 120,
                    align: 'center'
                },
                {
                    field: 'tradeProductList',
                    title: '交易产品',
                    width: 200,
                    align: 'center',
                    formatter: function (value, rowData) {
                        if ($.isArray(value) && value.length > 0) {
                            // 写法1：
                            /*var str = "";
                            for (var i = 0; i < value.length; i++) {
                                str += value[i].fundName;
                                if (i != value.length) {
                                    str += "<br/>"
                                }
                            }
                            return str;*/

                            // 写法2：使用reduce进行简化
                            return value.reduce(function (previousValue, currentValue) {
                                if (previousValue) {
                                    return previousValue + "<br/>" + currentValue.fundName;
                                } else {
                                    return currentValue.fundName;
                                }
                            }, "");
                        }
                    }
                }
            ]],
            /*onCheck: function (index, row) {
                console.log("触发了check事件");
            },
            onUncheck: function (index, row) {
                console.log("触发了onUncheck事件");
            },
            onCheckAll: function (rows) {
                console.log("触发了全选事件", arguments);
            },
            onUncheckAll: function (rows) {
                console.log("触发了取消全选事件", arguments);
            },*/
            onCheck: regenerateChart,
            onUncheck: regenerateChart,
            onCheckAll: regenerateChart,
            onUncheckAll: regenerateChart,
            onLoadSuccess: function () {
                console.log("onLoadSuccess...");
            }
        });

        var tableData = getTableData();
        var tableDataSize = tableData.length;
        // 标记行号（默认数据按照tradeDt从大到小排的，这里标序号也要从大到小；
        // 如果tradeDt从小到大排的，这里标序号也要从小到大）
        tableData.forEach(function (item, index) {
            item.rowNum = tableDataSize - index;
            item.closePrice = getClosePrice(initChartData.seriesData, initChartData.xAxisData, item.tradeDt);
        });
        // console.log(tableData);

        $tradeListDg.datagrid("loadData", tableData);
    }

    /**
     * 初始化页面
     */
    var initPage = function () {
        // 加载列表数据
        loadTable();
        // 初始化页面时默认勾选全部（这里会触发checkAll事件，调用regenerateChart方法来生成图）
        $tradeListDg.datagrid("checkAll");
    }

    // 重新生成图
    var regenerateChart = function () {
        // console.log("regenerateChart...");
        // 处理选中行的标号
        handleCheckedRowsRownum($tradeListDg);
        // 处理未选中行的标号
        handleUncheckedRowsRownum($tradeListDg);

        // 重新生成分析图
        var checkedRows = $tradeListDg.datagrid("getChecked");
        var markPointArr = [];

        /**
         * name：给自己看的，页面上没用到
         * coord：最终会是 ["2016/11/29",3521.2984]，用来定位页面上需要打标记的点
         * value：页面上打标记的位置需要显示的文字
         * itemStyle：页面上打标记的位置的样式 rgb(0,200,0) 绿色；rgb(255,0,0) 红色

         最终生成的数据，就像下面这样的：
         [{name:'点1',coord:["2016/11/29"],value:1,itemStyle:{color:'rgb(255,0,0)'}},
         {name:'点2',coord:["2017/02/23"],value:2,itemStyle:{color:'rgb(255,0,0)'}},
         {name:'点3',coord:["2018/04/23"],value:3,itemStyle:{color:'rgb(0,200,0)'}},
         {name:'点4',coord:["2019/08/06"],value:4,itemStyle:{color:'rgb(0,200,0)'}},
         {name:'点5',coord:["2020/09/14"],value:5,itemStyle:{color:'rgb(255,0,0)'}}
         ]
         */
        checkedRows.forEach(function (row) {
            var tradeType = row.tradeType;
            var tradeDt = row.tradeDt;
            markPointArr.push({name:'XX标点',
                coord:[row.tradeDt, getClosePrice(initChartData.seriesData,initChartData.xAxisData,tradeDt)],
                value:row.rowNum,
                itemStyle:{color:TRADE_TYPE_ENUM[tradeType].typeColor}
            });
        });
        // console.log("markPointArr", markPointArr);
        generateChartCore(initChartData.xAxisData, initChartData.seriesData, markPointArr);
    }

    /**
     * 对已选中的行的“序号”列重新标号
     * 标号规则：对所有选中行，依次按照交易时间从早到晚进行标号
     * @param $dg
     */
    var handleCheckedRowsRownum = function ($dg) {
        // 获取当前列表的选中行
        var checkeRows = $dg.datagrid("getChecked");
        // 获取当前列表的选中的行数
        var checkedRowCount = checkeRows.length;

        // rowIndex：该选中行在所有选中行中的行索引
        checkeRows.forEach(function (row, rowIndex) {
            var newRowNum = checkedRowCount - rowIndex;
            // 该选中行在表格中的行索引
            var orginalRowIndex = $dg.datagrid("getRowIndex", row);
            $dg.datagrid("updateRow", {
                index: orginalRowIndex,
                row: {rowNum: newRowNum}
            });
        });
    }

    // 处理未选中的行的“序号”列
    var handleUncheckedRowsRownum = function ($dg) {
        // 获取未选中的行
        var $uncheckedRows = $dg.datagrid('getPanel').find(".datagrid-row").filter(":not(.datagrid-row-checked)");
        $uncheckedRows.each(function () {
            var rowIndex = $(this).attr("datagrid-row-index");
            $dg.datagrid("updateRow", {
                index: rowIndex,
                row: {rowNum: ""}
            });
        });
    }

    /**
     * 生成图
     * @param xAxisData
     * @param seriesData
     * @param markPointArr
     */
    var generateChartCore = function (xAxisData, seriesData, markPointArr) {
        var myChart = $.ddchart.getProcessedEcharts('chart1');
        var option = getOption(xAxisData, seriesData, markPointArr);
        myChart.setOption(option);

        function getOption(xAxisData, seriesData, markPointArr) {
            return {
                title: {
                    text: '产品交易情况',
                    x: 'center'
                },
                xAxis : [
                    {
                        type : 'category',
                        name : '日期',
                        data : xAxisData,
                        axisTick: {
                            alignWithLabel: true
                        }
                    }
                ],
                yAxis : [
                    {
                        type : 'value',
                        name : '指数收盘价',
                        scale: true,
                        splitArea: {
                            show: true
                        }
                    }
                ],
                series : [
                    {
                        name:'收盘价',
                        cursor: 'pointer',
                        type:'line',
                        data: seriesData,
                        symbol: 'none',
                        markPoint: {
                            symbol: "pin", //标注类型
                            symbolSize: 35, //标记大小
                            // 下面这个一般可以不用写，写下面部分主要是看有没有触发打点
                            /*label: {
                                normal: {
                                    formatter: function (param) {
                                         console.log(param,'打点');
                                        return param != null ? param.value + '号' : '';
                                    }
                                }
                            },*/
                            data: markPointArr,
                        },
                        smooth: true,
                        lineStyle: {
                            opacity: 0.5,
                            color:'#f00'
                        }
                    }
                ]
            }
        }
    }

    // 获取指数收盘价
    function getClosePrice(seriesData, xAxisData, date) {
        var price = seriesData[xAxisData.indexOf(date)];
        return price.toFixed(2);
    }

    /**
     * 获取列表数据
     */
    var getTableData = function () {
        return [
            {tradeDt:"2020/09/14",tradeType:1,tradeMoney:30000,
                tradeProductList:[
                    {fundCode: '110022',fundName:'易方达消费行业股票（买3万）'}
                ]
            },
            {tradeDt:"2019/08/06",tradeType:2,tradeMoney:30000,
                tradeProductList:[
                    {fundCode: '420003',fundName:'天弘永定价值成长混合（卖6万）'},
                    {fundCode: '202005',fundName:'南方成分精选混合A（买3万）'}
                ]
            },
            {tradeDt:"2018/04/23",tradeType:2,tradeMoney:60000,
                tradeProductList:[
                    {fundCode: '202005',fundName:'南方成分精选混合A（卖6万）'}
                ]
            },
            {tradeDt:"2017/02/23",tradeType:1,tradeMoney:30000,
                tradeProductList:[
                    {fundCode: '161725',fundName:'招商中证白酒指数(LOF)A（买3万）'}
                ]
            },
            {tradeDt:"2016/11/29",tradeType:1,tradeMoney:0,
                tradeProductList:[
                    {fundCode: '110022',fundName:'易方达消费行业股票（买3万）'},
                    {fundCode: '161725',fundName:'招商中证白酒指数(LOF)A（卖3万）'}
                ]
            }
        ];
    }

    // 生成图表数据
    function generateChartData1() {
        var xAxisDataStr = '["2016/11/29","2016/11/30","2016/12/01","2016/12/02","2016/12/05","2016/12/06","2016/12/07","2016/12/08","2016/12/09","2016/12/12","2016/12/13","2016/12/14","2016/12/15","2016/12/16","2016/12/19","2016/12/20","2016/12/21","2016/12/22","2016/12/23","2016/12/26","2016/12/27","2016/12/28","2016/12/29","2016/12/30","2017/01/03","2017/01/04","2017/01/05","2017/01/06","2017/01/09","2017/01/10","2017/01/11","2017/01/12","2017/01/13","2017/01/16","2017/01/17","2017/01/18","2017/01/19","2017/01/20","2017/01/23","2017/01/24","2017/01/25","2017/01/26","2017/02/03","2017/02/06","2017/02/07","2017/02/08","2017/02/09","2017/02/10","2017/02/13","2017/02/14","2017/02/15","2017/02/16","2017/02/17","2017/02/20","2017/02/21","2017/02/22","2017/02/23","2017/02/24","2017/02/27","2017/02/28","2017/03/01","2017/03/02","2017/03/03","2017/03/06","2017/03/07","2017/03/08","2017/03/09","2017/03/10","2017/03/13","2017/03/14","2017/03/15","2017/03/16","2017/03/17","2017/03/20","2017/03/21","2017/03/22","2017/03/23","2017/03/24","2017/03/27","2017/03/28","2017/03/29","2017/03/30","2017/03/31","2017/04/05","2017/04/06","2017/04/07","2017/04/10","2017/04/11","2017/04/12","2017/04/13","2017/04/14","2017/04/17","2017/04/18","2017/04/19","2017/04/20","2017/04/21","2017/04/24","2017/04/25","2017/04/26","2017/04/27","2017/04/28","2017/05/02","2017/05/03","2017/05/04","2017/05/05","2017/05/08","2017/05/09","2017/05/10","2017/05/11","2017/05/12","2017/05/15","2017/05/16","2017/05/17","2017/05/18","2017/05/19","2017/05/22","2017/05/23","2017/05/24","2017/05/25","2017/05/26","2017/05/31","2017/06/01","2017/06/02","2017/06/05","2017/06/06","2017/06/07","2017/06/08","2017/06/09","2017/06/12","2017/06/13","2017/06/14","2017/06/15","2017/06/16","2017/06/19","2017/06/20","2017/06/21","2017/06/22","2017/06/23","2017/06/26","2017/06/27","2017/06/28","2017/06/29","2017/06/30","2017/07/03","2017/07/04","2017/07/05","2017/07/06","2017/07/07","2017/07/10","2017/07/11","2017/07/12","2017/07/13","2017/07/14","2017/07/17","2017/07/18","2017/07/19","2017/07/20","2017/07/21","2017/07/24","2017/07/25","2017/07/26","2017/07/27","2017/07/28","2017/07/31","2017/08/01","2017/08/02","2017/08/03","2017/08/04","2017/08/07","2017/08/08","2017/08/09","2017/08/10","2017/08/11","2017/08/14","2017/08/15","2017/08/16","2017/08/17","2017/08/18","2017/08/21","2017/08/22","2017/08/23","2017/08/24","2017/08/25","2017/08/28","2017/08/29","2017/08/30","2017/08/31","2017/09/01","2017/09/04","2017/09/05","2017/09/06","2017/09/07","2017/09/08","2017/09/11","2017/09/12","2017/09/13","2017/09/14","2017/09/15","2017/09/18","2017/09/19","2017/09/20","2017/09/21","2017/09/22","2017/09/25","2017/09/26","2017/09/27","2017/09/28","2017/09/29","2017/10/09","2017/10/10","2017/10/11","2017/10/12","2017/10/13","2017/10/16","2017/10/17","2017/10/18","2017/10/19","2017/10/20","2017/10/23","2017/10/24","2017/10/25","2017/10/26","2017/10/27","2017/10/30","2017/10/31","2017/11/01","2017/11/02","2017/11/03","2017/11/06","2017/11/07","2017/11/08","2017/11/09","2017/11/10","2017/11/13","2017/11/14","2017/11/15","2017/11/16","2017/11/17","2017/11/20","2017/11/21","2017/11/22","2017/11/23","2017/11/24","2017/11/27","2017/11/28","2017/11/29","2017/11/30","2017/12/01","2017/12/04","2017/12/05","2017/12/06","2017/12/07","2017/12/08","2017/12/11","2017/12/12","2017/12/13","2017/12/14","2017/12/15","2017/12/18","2017/12/19","2017/12/20","2017/12/21","2017/12/22","2017/12/25","2017/12/26","2017/12/27","2017/12/28","2017/12/29","2018/01/02","2018/01/03","2018/01/04","2018/01/05","2018/01/08","2018/01/09","2018/01/10","2018/01/11","2018/01/12","2018/01/15","2018/01/16","2018/01/17","2018/01/18","2018/01/19","2018/01/22","2018/01/23","2018/01/24","2018/01/25","2018/01/26","2018/01/29","2018/01/30","2018/01/31","2018/02/01","2018/02/02","2018/02/05","2018/02/06","2018/02/07","2018/02/08","2018/02/09","2018/02/12","2018/02/13","2018/02/14","2018/02/22","2018/02/23","2018/02/26","2018/02/27","2018/02/28","2018/03/01","2018/03/02","2018/03/05","2018/03/06","2018/03/07","2018/03/08","2018/03/09","2018/03/12","2018/03/13","2018/03/14","2018/03/15","2018/03/16","2018/03/19","2018/03/20","2018/03/21","2018/03/22","2018/03/23","2018/03/26","2018/03/27","2018/03/28","2018/03/29","2018/03/30","2018/04/02","2018/04/03","2018/04/04","2018/04/09","2018/04/10","2018/04/11","2018/04/12","2018/04/13","2018/04/16","2018/04/17","2018/04/18","2018/04/19","2018/04/20","2018/04/23","2018/04/24","2018/04/25","2018/04/26","2018/04/27","2018/05/02","2018/05/03","2018/05/04","2018/05/07","2018/05/08","2018/05/09","2018/05/10","2018/05/11","2018/05/14","2018/05/15","2018/05/16","2018/05/17","2018/05/18","2018/05/21","2018/05/22","2018/05/23","2018/05/24","2018/05/25","2018/05/28","2018/05/29","2018/05/30","2018/05/31","2018/06/01","2018/06/04","2018/06/05","2018/06/06","2018/06/07","2018/06/08","2018/06/11","2018/06/12","2018/06/13","2018/06/14","2018/06/15","2018/06/19","2018/06/20","2018/06/21","2018/06/22","2018/06/25","2018/06/26","2018/06/27","2018/06/28","2018/06/29","2018/07/02","2018/07/03","2018/07/04","2018/07/05","2018/07/06","2018/07/09","2018/07/10","2018/07/11","2018/07/12","2018/07/13","2018/07/16","2018/07/17","2018/07/18","2018/07/19","2018/07/20","2018/07/23","2018/07/24","2018/07/25","2018/07/26","2018/07/27","2018/07/30","2018/07/31","2018/08/01","2018/08/02","2018/08/03","2018/08/06","2018/08/07","2018/08/08","2018/08/09","2018/08/10","2018/08/13","2018/08/14","2018/08/15","2018/08/16","2018/08/17","2018/08/20","2018/08/21","2018/08/22","2018/08/23","2018/08/24","2018/08/27","2018/08/28","2018/08/29","2018/08/30","2018/08/31","2018/09/03","2018/09/04","2018/09/05","2018/09/06","2018/09/07","2018/09/10","2018/09/11","2018/09/12","2018/09/13","2018/09/14","2018/09/17","2018/09/18","2018/09/19","2018/09/20","2018/09/21","2018/09/25","2018/09/26","2018/09/27","2018/09/28","2018/10/08","2018/10/09","2018/10/10","2018/10/11","2018/10/12","2018/10/15","2018/10/16","2018/10/17","2018/10/18","2018/10/19","2018/10/22","2018/10/23","2018/10/24","2018/10/25","2018/10/26","2018/10/29","2018/10/30","2018/10/31","2018/11/01","2018/11/02","2018/11/05","2018/11/06","2018/11/07","2018/11/08","2018/11/09","2018/11/12","2018/11/13","2018/11/14","2018/11/15","2018/11/16","2018/11/19","2018/11/20","2018/11/21","2018/11/22","2018/11/23","2018/11/26","2018/11/27","2018/11/28","2018/11/29","2018/11/30","2018/12/03","2018/12/04","2018/12/05","2018/12/06","2018/12/07","2018/12/10","2018/12/11","2018/12/12","2018/12/13","2018/12/14","2018/12/17","2018/12/18","2018/12/19","2018/12/20","2018/12/21","2018/12/24","2018/12/25","2018/12/26","2018/12/27","2018/12/28","2019/01/02","2019/01/03","2019/01/04","2019/01/07","2019/01/08","2019/01/09","2019/01/10","2019/01/11","2019/01/14","2019/01/15","2019/01/16","2019/01/17","2019/01/18","2019/01/21","2019/01/22","2019/01/23","2019/01/24","2019/01/25","2019/01/28","2019/01/29","2019/01/30","2019/01/31","2019/02/01","2019/02/11","2019/02/12","2019/02/13","2019/02/14","2019/02/15","2019/02/18","2019/02/19","2019/02/20","2019/02/21","2019/02/22","2019/02/25","2019/02/26","2019/02/27","2019/02/28","2019/03/01","2019/03/04","2019/03/05","2019/03/06","2019/03/07","2019/03/08","2019/03/11","2019/03/12","2019/03/13","2019/03/14","2019/03/15","2019/03/18","2019/03/19","2019/03/20","2019/03/21","2019/03/22","2019/03/25","2019/03/26","2019/03/27","2019/03/28","2019/03/29","2019/04/01","2019/04/02","2019/04/03","2019/04/04","2019/04/08","2019/04/09","2019/04/10","2019/04/11","2019/04/12","2019/04/15","2019/04/16","2019/04/17","2019/04/18","2019/04/19","2019/04/22","2019/04/23","2019/04/24","2019/04/25","2019/04/26","2019/04/29","2019/04/30","2019/05/06","2019/05/07","2019/05/08","2019/05/09","2019/05/10","2019/05/13","2019/05/14","2019/05/15","2019/05/16","2019/05/17","2019/05/20","2019/05/21","2019/05/22","2019/05/23","2019/05/24","2019/05/27","2019/05/28","2019/05/29","2019/05/30","2019/05/31","2019/06/03","2019/06/04","2019/06/05","2019/06/06","2019/06/10","2019/06/11","2019/06/12","2019/06/13","2019/06/14","2019/06/17","2019/06/18","2019/06/19","2019/06/20","2019/06/21","2019/06/24","2019/06/25","2019/06/26","2019/06/27","2019/06/28","2019/07/01","2019/07/02","2019/07/03","2019/07/04","2019/07/05","2019/07/08","2019/07/09","2019/07/10","2019/07/11","2019/07/12","2019/07/15","2019/07/16","2019/07/17","2019/07/18","2019/07/19","2019/07/22","2019/07/23","2019/07/24","2019/07/25","2019/07/26","2019/07/29","2019/07/30","2019/07/31","2019/08/01","2019/08/02","2019/08/05","2019/08/06","2019/08/07","2019/08/08","2019/08/09","2019/08/12","2019/08/13","2019/08/14","2019/08/15","2019/08/16","2019/08/19","2019/08/20","2019/08/21","2019/08/22","2019/08/23","2019/08/26","2019/08/27","2019/08/28","2019/08/29","2019/08/30","2019/09/02","2019/09/03","2019/09/04","2019/09/05","2019/09/06","2019/09/09","2019/09/10","2019/09/11","2019/09/12","2019/09/16","2019/09/17","2019/09/18","2019/09/19","2019/09/20","2019/09/23","2019/09/24","2019/09/25","2019/09/26","2019/09/27","2019/09/30","2019/10/08","2019/10/09","2019/10/10","2019/10/11","2019/10/14","2019/10/15","2019/10/16","2019/10/17","2019/10/18","2019/10/21","2019/10/22","2019/10/23","2019/10/24","2019/10/25","2019/10/28","2019/10/29","2019/10/30","2019/10/31","2019/11/01","2019/11/04","2019/11/05","2019/11/06","2019/11/07","2019/11/08","2019/11/11","2019/11/12","2019/11/13","2019/11/14","2019/11/15","2019/11/18","2019/11/19","2019/11/20","2019/11/21","2019/11/22","2019/11/25","2019/11/26","2019/11/27","2019/11/28","2019/11/29","2019/12/02","2019/12/03","2019/12/04","2019/12/05","2019/12/06","2019/12/09","2019/12/10","2019/12/11","2019/12/12","2019/12/13","2019/12/16","2019/12/17","2019/12/18","2019/12/19","2019/12/20","2019/12/23","2019/12/24","2019/12/25","2019/12/26","2019/12/27","2019/12/30","2019/12/31","2020/01/02","2020/01/03","2020/01/06","2020/01/07","2020/01/08","2020/01/09","2020/01/10","2020/01/13","2020/01/14","2020/01/15","2020/01/16","2020/01/17","2020/01/20","2020/01/21","2020/01/22","2020/01/23","2020/02/03","2020/02/04","2020/02/05","2020/02/06","2020/02/07","2020/02/10","2020/02/11","2020/02/12","2020/02/13","2020/02/14","2020/02/17","2020/02/18","2020/02/19","2020/02/20","2020/02/21","2020/02/24","2020/02/25","2020/02/26","2020/02/27","2020/02/28","2020/03/02","2020/03/03","2020/03/04","2020/03/05","2020/03/06","2020/03/09","2020/03/10","2020/03/11","2020/03/12","2020/03/13","2020/03/16","2020/03/17","2020/03/18","2020/03/19","2020/03/20","2020/03/23","2020/03/24","2020/03/25","2020/03/26","2020/03/27","2020/03/30","2020/03/31","2020/04/01","2020/04/02","2020/04/03","2020/04/07","2020/04/08","2020/04/09","2020/04/10","2020/04/13","2020/04/14","2020/04/15","2020/04/16","2020/04/17","2020/04/20","2020/04/21","2020/04/22","2020/04/23","2020/04/24","2020/04/27","2020/04/28","2020/04/29","2020/04/30","2020/05/06","2020/05/07","2020/05/08","2020/05/11","2020/05/12","2020/05/13","2020/05/14","2020/05/15","2020/05/18","2020/05/19","2020/05/20","2020/05/21","2020/05/22","2020/05/25","2020/05/26","2020/05/27","2020/05/28","2020/05/29","2020/06/01","2020/06/02","2020/06/03","2020/06/04","2020/06/05","2020/06/08","2020/06/09","2020/06/10","2020/06/11","2020/06/12","2020/06/15","2020/06/16","2020/06/17","2020/06/18","2020/06/19","2020/06/22","2020/06/23","2020/06/24","2020/06/29","2020/06/30","2020/07/01","2020/07/02","2020/07/03","2020/07/06","2020/07/07","2020/07/08","2020/07/09","2020/07/10","2020/07/13","2020/07/14","2020/07/15","2020/07/16","2020/07/17","2020/07/20","2020/07/21","2020/07/22","2020/07/23","2020/07/24","2020/07/27","2020/07/28","2020/07/29","2020/07/30","2020/07/31","2020/08/03","2020/08/04","2020/08/05","2020/08/06","2020/08/07","2020/08/10","2020/08/11","2020/08/12","2020/08/13","2020/08/14","2020/08/17","2020/08/18","2020/08/19","2020/08/20","2020/08/21","2020/08/24","2020/08/25","2020/08/26","2020/08/27","2020/08/28","2020/08/31","2020/09/01","2020/09/02","2020/09/03","2020/09/04","2020/09/07","2020/09/08","2020/09/09","2020/09/10","2020/09/11","2020/09/14","2020/09/15","2020/09/16","2020/09/17","2020/09/18","2020/09/21","2020/09/22","2020/09/23","2020/09/24","2020/09/25","2020/09/28","2020/09/29","2020/09/30","2020/10/09","2020/10/12","2020/10/13","2020/10/14","2020/10/15","2020/10/16","2020/10/19","2020/10/20","2020/10/21","2020/10/22","2020/10/23","2020/10/26","2020/10/27","2020/10/28","2020/10/29","2020/10/30","2020/11/02","2020/11/03","2020/11/04","2020/11/05","2020/11/06","2020/11/09","2020/11/10","2020/11/11","2020/11/12","2020/11/13","2020/11/16","2020/11/17","2020/11/18","2020/11/19","2020/11/20","2020/11/23","2020/11/24","2020/11/25","2020/11/26","2020/11/27","2020/11/30","2020/12/01","2020/12/02","2020/12/03","2020/12/04","2020/12/07","2020/12/08","2020/12/09","2020/12/10","2020/12/11","2020/12/14","2020/12/15","2020/12/16","2020/12/17","2020/12/18","2020/12/21","2020/12/22","2020/12/23","2020/12/24","2020/12/25","2020/12/28","2020/12/29","2020/12/30","2020/12/31","2021/01/04","2021/01/05","2021/01/06","2021/01/07","2021/01/08","2021/01/11","2021/01/12","2021/01/13","2021/01/14","2021/01/15","2021/01/18","2021/01/19","2021/01/20","2021/01/21","2021/01/22","2021/01/25","2021/01/26","2021/01/27","2021/01/28","2021/01/29","2021/02/01","2021/02/02","2021/02/03","2021/02/04","2021/02/05","2021/02/08","2021/02/09","2021/02/10","2021/02/18","2021/02/19","2021/02/22","2021/02/23","2021/02/24","2021/02/25","2021/02/26","2021/03/01","2021/03/02","2021/03/03","2021/03/04","2021/03/05","2021/03/08","2021/03/09","2021/03/10","2021/03/11","2021/03/12","2021/03/15","2021/03/16","2021/03/17","2021/03/18","2021/03/19","2021/03/22","2021/03/23","2021/03/24","2021/03/25","2021/03/26","2021/03/29","2021/03/30","2021/03/31","2021/04/01","2021/04/02","2021/04/06","2021/04/07","2021/04/08","2021/04/09","2021/04/12","2021/04/13","2021/04/14","2021/04/15","2021/04/16","2021/04/19","2021/04/20","2021/04/21","2021/04/22","2021/04/23","2021/04/26","2021/04/27","2021/04/28","2021/04/29","2021/04/30","2021/05/06","2021/05/07","2021/05/10","2021/05/11","2021/05/12","2021/05/13","2021/05/14","2021/05/17","2021/05/18","2021/05/19","2021/05/20","2021/05/21","2021/05/24","2021/05/25","2021/05/26","2021/05/27","2021/05/28","2021/05/31","2021/06/01","2021/06/02","2021/06/03","2021/06/04","2021/06/07","2021/06/08","2021/06/09","2021/06/10","2021/06/11","2021/06/15","2021/06/16","2021/06/17","2021/06/18","2021/06/21","2021/06/22","2021/06/23","2021/06/24","2021/06/25","2021/06/28","2021/06/29","2021/06/30","2021/07/01","2021/07/02","2021/07/05","2021/07/06","2021/07/07","2021/07/08","2021/07/09","2021/07/12","2021/07/13","2021/07/14","2021/07/15","2021/07/16","2021/07/19","2021/07/20","2021/07/21","2021/07/22","2021/07/23","2021/07/26","2021/07/27","2021/07/28","2021/07/29","2021/07/30","2021/08/02","2021/08/03","2021/08/04","2021/08/05","2021/08/06","2021/08/09","2021/08/10","2021/08/11","2021/08/12","2021/08/13","2021/08/16","2021/08/17","2021/08/18","2021/08/19","2021/08/20","2021/08/23","2021/08/24","2021/08/25","2021/08/26","2021/08/27","2021/08/30","2021/08/31","2021/09/01","2021/09/02","2021/09/03","2021/09/06","2021/09/07","2021/09/08","2021/09/09","2021/09/10","2021/09/13","2021/09/14","2021/09/15","2021/09/16","2021/09/17","2021/09/22","2021/09/23","2021/09/24","2021/09/27","2021/09/28","2021/09/29","2021/09/30","2021/10/08","2021/10/11","2021/10/12","2021/10/13","2021/10/14","2021/10/15","2021/10/18","2021/10/19","2021/10/20","2021/10/21","2021/10/22","2021/10/25","2021/10/26","2021/10/27","2021/10/28","2021/10/29","2021/11/01","2021/11/02","2021/11/03","2021/11/04","2021/11/05","2021/11/08","2021/11/09","2021/11/10","2021/11/11","2021/11/12","2021/11/15","2021/11/16","2021/11/17","2021/11/18","2021/11/19","2021/11/22","2021/11/23","2021/11/24","2021/11/25","2021/11/26"]';
        var xAxisData = JSON.parse(xAxisDataStr);
        var seriesDataStr = '[3521.2984,3535.0807,3564.0404,3538.001,3565.036,3528.9547,3469.4073,3459.1533,3475.7473,3470.1426,3493.7004,3409.1794,3405.0355,3378.9453,3340.4338,3346.0305,3328.9827,3309.0641,3338.536,3335.672,3307.5991,3322.4006,3316.3852,3301.8887,3297.7648,3310.0808,3342.2272,3368.3117,3367.7892,3347.6665,3363.9014,3358.2716,3334.4954,3317.6241,3319.9122,3319.4455,3326.3563,3339.3653,3329.2891,3354.8891,3364.0808,3364.4509,3375.9042,3387.9606,3364.4923,3373.2051,3365.6849,3383.2878,3396.2924,3413.4868,3436.275,3435.8042,3421.7131,3440.9331,3421.4419,3471.3926,3482.823,3489.7567,3473.3236,3473.8517,3446.2228,3452.8103,3458.4376,3435.0963,3427.8628,3446.484,3453.9565,3448.7313,3426.9438,3427.8916,3458.098,3456.6934,3463.6436,3481.5066,3445.8051,3449.6126,3466.3468,3450.0502,3461.9782,3489.5997,3478.0385,3469.8093,3465.1933,3436.758,3456.0455,3503.8932,3514.0469,3517.4634,3505.1392,3517.328,3509.4387,3514.5662,3486.5045,3479.9417,3462.7429,3445.8761,3461.5481,3466.7865,3431.2587,3440.9743,3445.1832,3446.7202,3439.753,3426.5766,3413.1282,3404.3864,3382.5502,3358.8125,3352.5324,3337.7007,3356.6459,3385.3787,3399.1937,3428.6491,3409.9656,3398.1127,3403.8492,3411.2387,3424.194,3424.1669,3485.6581,3480.4345,3492.8845,3497.7382,3486.5074,3468.7538,3492.8816,3533.8718,3560.9786,3576.1703,3574.3894,3582.2674,3535.2987,3528.7926,3518.7611,3553.6653,3546.494,3587.955,3590.3425,3622.8831,3668.0919,3674.7152,3646.1666,3668.8279,3666.7977,3650.8463,3619.9841,3659.6795,3660.0967,3655.9293,3653.6868,3670.8086,3658.8236,3686.9205,3703.094,3663.5575,3667.1807,3729.7466,3747.8843,3728.5976,3743.4686,3719.559,3705.3884,3712.1947,3721.8914,3737.8732,3770.3828,3760.8525,3727.8264,3707.5796,3726.7948,3732.2129,3731.044,3715.9208,3647.3503,3694.6831,3706.0566,3701.4207,3721.277,3724.6748,3740.9941,3752.298,3756.0884,3734.6458,3795.7544,3842.7119,3834.5376,3834.3005,3822.0928,3830.5383,3845.6163,3857.0464,3849.4499,3829.8713,3825.9895,3825.6453,3837.9341,3842.6061,3829.9554,3831.2965,3843.1428,3832.1161,3842.4353,3837.8176,3837.7304,3817.7915,3820.7816,3821.2,3822.5386,3836.5013,3882.2076,3889.8637,3902.6868,3912.9536,3921.0017,3913.4462,3913.0688,3944.1626,3931.2495,3926.852,3930.7981,3959.3953,3976.949,3993.5752,4021.9676,4009.7218,4006.7179,3996.6221,3997.1343,3992.6979,4020.8896,4054.2465,4048.0057,4075.8998,4111.9112,4128.0733,4099.351,4073.6696,4105.0122,4120.8508,4143.8334,4217.7015,4227.5666,4102.3966,4104.2034,4049.9475,4055.8235,4053.7529,4006.0993,3998.1365,4018.8571,4040.1704,4015.8211,3971.0569,4003.3792,4069.4997,4016.0163,4050.0927,4026.1516,3980.8558,3985.2914,4035.3294,4030.4898,4067.8485,4054.5984,4041.5401,4053.6224,3991.2075,4018.8974,4030.8549,4087.4012,4111.3925,4128.8119,4138.7505,4160.1595,4189.2977,4207.8132,4205.5863,4225.001,4225.2393,4258.473,4248.1164,4271.4168,4285.395,4336.5974,4382.6129,4389.8853,4365.0794,4381.2996,4302.0181,4256.1021,4275.8986,4245.8978,4271.2326,4274.1464,4148.8856,4050.4972,4012.0472,3840.6527,3890.1046,3935.6324,3966.9614,4052.7332,4071.0889,4118.4186,4058.9806,4023.6415,4049.0863,4016.461,4018.097,4066.5647,4036.6536,4077.6001,4108.8652,4127.6662,4091.2533,4073.3447,4096.1627,4056.4226,4074.2479,4077.7041,4061.0502,4020.349,3904.9355,3879.893,3913.2689,3842.7155,3894.0498,3898.4977,3886.9189,3862.4796,3854.8625,3852.9292,3927.1729,3938.3434,3898.6354,3871.1443,3808.863,3748.6412,3766.282,3811.843,3760.8543,3766.3257,3843.4886,3828.7015,3755.4941,3756.8765,3763.6461,3793.0001,3774.5981,3834.1877,3878.6767,3871.6152,3893.0565,3872.8383,3909.2933,3924.0975,3892.8442,3864.0507,3903.0637,3921.2421,3906.2081,3854.5825,3827.217,3816.498,3833.2599,3804.0093,3723.3724,3802.3759,3770.5891,3807.5781,3845.3164,3837.3511,3831.0128,3779.6159,3779.9818,3825.9534,3788.3391,3773.3655,3753.4338,3621.1166,3635.4436,3592.965,3608.9046,3560.4777,3531.1112,3459.2621,3423.5255,3510.9845,3407.9638,3409.2801,3363.7473,3342.4379,3365.1227,3459.1837,3467.5155,3407.5297,3481.0559,3492.6897,3472.0859,3449.3773,3431.3227,3428.343,3492.8938,3525.7503,3581.7057,3577.7522,3536.2456,3521.2269,3515.0794,3517.6568,3447.3882,3370.9579,3315.2839,3273.2728,3368.8695,3314.5075,3397.5298,3405.0191,3390.3441,3372.9137,3291.976,3276.7276,3229.6198,3267.2498,3326.6489,3307.9545,3320.0257,3325.3347,3406.5735,3400.1705,3386.5736,3351.0942,3334.5036,3321.8248,3363.8984,3298.1412,3262.8808,3277.6438,3230.0681,3224.2116,3202.0248,3236.5662,3242.0902,3204.9224,3269.4319,3312.4823,3310.1258,3410.4856,3379.8043,3417.2413,3403.5902,3438.8649,3290.8988,3288.6906,3281.5978,3124.1139,3170.7262,3126.4516,3100.9738,3118.2463,3044.3918,3134.9455,3270.2732,3183.4257,3188.2018,3194.3084,3173.635,3076.8889,3110.2605,3153.8234,3177.0338,3290.2455,3262.8351,3243.1504,3221.9101,3212.7737,3167.4442,3205.1407,3237.3823,3204.9427,3242.3715,3257.6735,3294.6031,3218.4076,3226.4918,3214.4273,3143.4752,3141.2434,3137.2413,3178.9326,3137.6542,3172.69,3260.9502,3267.7095,3252.0041,3181.673,3181.5646,3144.7631,3159.8158,3170.6092,3219.6924,3165.9109,3161.1966,3128.4265,3091.1255,3067.4169,3029.3951,3038.1981,3017.2815,3002.0327,2990.5057,3010.6536,2969.5353,2964.8421,3035.8741,3054.303,3047.7035,3078.4759,3072.6864,3094.7782,3067.7845,3127.9904,3128.6517,3111.4168,3168.1739,3185.6364,3143.3171,3141.0532,3158.7817,3184.4696,3183.7777,3193.9698,3168.4829,3201.6331,3247.3971,3306.4725,3330.3353,3397.0276,3402.1403,3338.7047,3445.7448,3439.6078,3451.9273,3442.7056,3520.1182,3729.4831,3684.6935,3678.3921,3669.3703,3749.7143,3794.104,3816.0132,3848.0903,3808.8497,3657.579,3729.9546,3755.3519,3724.1941,3698.4858,3745.005,3851.7479,3833.9626,3835.4397,3836.8913,3833.8013,3742.8252,3700.4388,3743.3878,3728.3953,3872.3412,3973.928,3971.2852,4022.1566,4062.2309,4057.2286,4075.4301,4085.847,3997.5778,3988.6168,3975.5244,4085.7891,4087.2398,4072.0753,4120.6078,4025.6109,4019.0053,4030.0887,3941.816,3889.2748,3900.3339,3913.211,3684.6168,3720.6684,3667.4574,3599.7001,3730.4513,3668.7255,3645.1503,3727.0923,3743.9635,3648.7609,3617.7924,3666.7762,3649.3796,3583.9646,3593.9139,3637.1971,3672.2605,3663.909,3641.1833,3629.7893,3632.0127,3598.4666,3597.105,3564.6778,3610.7435,3719.2759,3691.0957,3685.3933,3654.8799,3654.8248,3667.6185,3715.9381,3828.5183,3833.9383,3841.2659,3801.3098,3794.331,3834.8172,3825.5873,3935.8116,3937.1691,3893.5341,3873.1019,3893.2025,3802.7897,3793.1297,3786.739,3785.221,3808.7311,3824.1878,3806.8449,3804.6384,3768.4019,3807.9551,3781.6832,3789.9135,3819.8325,3851.0665,3858.5688,3854.2704,3870.3176,3835.3589,3803.4694,3747.4379,3675.6884,3636.3289,3621.431,3669.2936,3633.5296,3699.1047,3665.7515,3682.4015,3694.0006,3710.5386,3791.0946,3787.7324,3781.7579,3793.5061,3820.8638,3765.9105,3816.9459,3802.5844,3790.1867,3799.5863,3848.3198,3853.6106,3886.0012,3925.323,3948.5075,3972.9484,3959.265,3930.0999,3972.3799,3957.7154,3891.2208,3910.0837,3924.3823,3935.6511,3890.6616,3901.0758,3870.9837,3841.1388,3852.6534,3814.5282,3837.6791,3843.2392,3874.6391,3911.7253,3953.2411,3936.2498,3922.6854,3925.2216,3869.3777,3880.8398,3895.8809,3871.0848,3870.6678,3896.7923,3926.585,3910.226,3891.2255,3886.7519,3952.3872,3978.1216,4002.8128,3984.8816,3991.8749,3973.0107,3902.9783,3903.6888,3899.9815,3905.857,3877.0892,3907.9291,3947.0392,3907.8641,3889.598,3849.9948,3878.2061,3891.6533,3875.6186,3862.3029,3828.6706,3836.0589,3851.0873,3849.819,3879.3638,3902.3853,3895.4468,3900.3843,3902.7492,3891.0242,3968.2211,3987.5464,4041.7996,4032.7826,4027.1495,4017.2527,3967.0962,3992.9581,3990.8671,4025.9879,4022.0278,4081.6334,4096.5821,4152.2408,4144.9649,4129.2954,4160.2274,4112.3172,4164.3697,4163.1849,4203.9883,4189.8862,4166.7344,4149.0434,4154.853,4185.8304,4114.3085,4131.9311,4003.9013,3688.3578,3785.6376,3828.5272,3899.7751,3899.8693,3916.0052,3952.4643,3984.4325,3959.9188,3987.7342,4077.4241,4057.5108,4051.3107,4144.6561,4149.4903,4132.8388,4123.8543,4073.0152,4084.8759,3940.0488,4069.6662,4091.3615,4115.0524,4206.7251,4138.5072,3997.1325,4082.7315,4028.4289,3950.9111,3895.3128,3727.8398,3709.6822,3636.2565,3589.0926,3653.2239,3530.3058,3625.1146,3722.5181,3698.0472,3710.0605,3674.1108,3686.1551,3675.0758,3734.5306,3713.2183,3798.0214,3780.3445,3792.8105,3769.1782,3753.2566,3825.6991,3797.3623,3802.3806,3839.4871,3853.4551,3808.0474,3839.3834,3829.7525,3796.9721,3822.769,3849.1465,3867.032,3912.5772,3936.2539,3924.8946,3963.6217,3960.1803,3960.2378,3968.2529,3925.2177,3912.8159,3922.9117,3956.2495,3935.222,3913.7949,3824.064,3829.3245,3872.7701,3845.6135,3856.6324,3867.0232,3971.3402,3983.5677,3983.6477,3982.1851,4001.2509,4021.9549,4047.0293,4039.7051,3995.8846,4003.0829,3954.9883,4014.5702,4017.5941,4044.3842,4098.7095,4102.0459,4121.7944,4138.9895,4109.7164,4163.9637,4247.7835,4335.8445,4419.5955,4670.0949,4698.1264,4774.0042,4840.7712,4753.1333,4852.9612,4806.6902,4744.4687,4516.2532,4544.7007,4680.3046,4691.0425,4714.4454,4712.4357,4505.5906,4528.45,4568.2576,4679.008,4656.1506,4695.0462,4771.3108,4775.8024,4777.1089,4762.7642,4707.9262,4724.8697,4681.7837,4647.6446,4635.7126,4704.6288,4815.2261,4812.7564,4740.6784,4679.1544,4718.8431,4755.8491,4761.9507,4706.1302,4731.3451,4844.2652,4816.2153,4842.1223,4843.887,4817.0952,4770.219,4669.3677,4694.3894,4584.5887,4581.9775,4627.2826,4651.0507,4688.4826,4657.3584,4632.7142,4737.0887,4691.4281,4635.7608,4652.3273,4563.0657,4570.0216,4581.9085,4591.7993,4587.3953,4681.1412,4823.1578,4839.201,4807.1021,4798.7361,4791.676,4755.4879,4793.4672,4792.8284,4777.9845,4718.4881,4691.2359,4699.2792,4737.2718,4772.9198,4695.3338,4720.8313,4777.5608,4813.6564,4885.1118,4885.7178,4981.3497,4953.8756,4904.8981,4908.463,4856.8513,4904.1716,4894.786,4891.6716,4927.9891,4943.2882,5005.0273,4974.2855,4910.7,4919.5912,4980.765,4960.2519,5067.0983,5067.1447,5057.0603,5065.9163,5022.2351,5009.8786,4942.6986,4940.5249,4889.6292,4934.8352,4945.1,4953.867,5017.4784,4999.9678,5046.8396,4964.7727,5007.1235,5000.0154,5042.0137,5064.4147,5042.9361,5113.7105,5211.2885,5267.7181,5368.5049,5417.6677,5513.6568,5495.4306,5441.1583,5596.3525,5577.9711,5470.4563,5458.0812,5518.5205,5437.5234,5476.4336,5564.9693,5569.776,5625.9232,5512.9678,5528.0034,5377.1427,5351.9646,5417.6484,5501.0915,5485.2008,5473.9475,5483.414,5564.5618,5686.2502,5807.7191,5768.3814,5778.842,5597.3327,5579.6681,5437.5683,5469.5584,5336.7609,5418.7837,5349.6301,5452.2125,5280.7058,5262.7958,5080.0246,4970.9994,5003.6121,5128.2156,5146.3786,5035.5441,5079.3624,5100.8581,5141.7681,5007.0907,5057.152,5009.2459,4928.6853,4926.3469,5037.9899,5046.8773,5094.7291,5048.3607,5110.7768,5161.5569,5140.3418,5103.7428,5112.2086,5035.3374,4947.7459,4939.6438,4980.6279,4948.9741,4966.1811,5087.0165,5083.3654,5098.7449,5089.2435,5135.4534,5077.2372,5090.5195,5119.2421,5164.1692,5123.489,5061.1244,4996.0527,4992.422,5023.0595,5044.5481,4992.9738,5110.5901,5184.9853,5187.6013,5172.272,5186.412,5134.1483,5155.5875,5318.478,5320.5927,5338.2329,5321.0886,5331.5696,5341.6798,5289.9736,5255.2855,5282.2772,5277.6271,5232.1165,5236.4493,5271.4661,5224.703,5166.5597,5080.4909,5101.8924,5102.4657,5090.3854,5122.1583,5147.3938,5155.9738,5239.9684,5251.7604,5190.5445,5224.041,5229.6642,5081.1172,5085.7924,5083.1043,5140.4899,5088.2566,5069.4361,5132.7088,5142.0991,5083.0849,5151.4626,5094.7727,5113.4945,5108.9941,5144.0428,5151.7517,5089.2282,4925.299,4751.313,4760.4826,4850.2746,4811.1695,4933.736,4934.4583,4978.8479,4948.6703,4921.5647,4985.5627,5043.148,5015.3406,4973.3509,4945.9829,4941.0676,4837.4034,4894.2384,4862.1394,4769.2678,4835.8782,4888.3902,4898.1572,4801.6094,4827.0433,4813.2703,4805.6099,4869.4587,4869.4113,4843.0624,4933.7262,4992.8294,4972.1324,4970.0133,5013.5219,4991.6598,4917.1617,4867.3187,4807.6978,4855.9402,4821.7675,4853.1957,4849.4277,4877.3698,4883.828,4833.9281,4866.3826,4929.9409,4936.1918,4883.8369,4940.1089,4913.6123,4932.1084,4874.7753,4922.7232,4910.1846,4928.0156,4959.7254,4979.5235,4963.0984,4898.1644,4864.138,4908.7701,4890.6851,4839.8457,4821.1119,4868.7419,4842.3458,4848.1795,4846.7444,4821.1925,4898.6529,4888.3749,4882.3777,4883.3206,4885.7544,4837.6185,4890.0575,4912.399,4913.3457,4916.6579]';
        var seriesData = JSON.parse(seriesDataStr);
        // seriesData[xAxisData.indexOf('2020/09/14')]
        /**
         * name：给自己看的，页面上没用到
         * coord：最终会是 ["2016/11/29",3521.2984]，用来定位页面上需要打标记的点
         * value：页面上打标记的位置需要显示的文字
         * itemStyle：页面上打标记的位置的样式 rgb(0,200,0) 绿色；rgb(255,0,0) 红色
         */
        /*var markPointArr = [{name:'点1',coord:["2016/11/29"],value:1,itemStyle:{color:'rgb(255,0,0)'}},
            {name:'点2',coord:["2017/02/23"],value:2,itemStyle:{color:'rgb(255,0,0)'}},
            {name:'点3',coord:["2018/04/23"],value:3,itemStyle:{color:'rgb(0,200,0)'}},
            {name:'点4',coord:["2019/08/06"],value:4,itemStyle:{color:'rgb(0,200,0)'}},
            {name:'点5',coord:["2020/09/14"],value:5,itemStyle:{color:'rgb(255,0,0)'}}
        ];
        markPointArr.forEach(function (item, index) {
            var date = item.coord[0];
            item.coord[1] = getClosePrice(seriesData, xAxisData, date);
        });*/
        // console.log(markPointArr);
        return {
            xAxisData: xAxisData,
            seriesData: seriesData,
            /*markPointArr: markPointArr*/
        };
    }

    return {
        initPage : initPage
    }
}();