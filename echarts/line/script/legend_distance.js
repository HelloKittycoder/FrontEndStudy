var LegendDistance = function () {

    var LINE_CHART_COLOR_ARR = ['#f04950','#6268a2','#959595','#333335','#ee703f','#7e4a9b','#8a662c','#44488e','#3faeee','#42b3ef','#dc4c4b','#9ea1cc','#cbcbcb','#5b5b63','#f8b49f','#ad78d2','#c79f64'];
    var generateChart = function () {
        var showdata = ['1.test---------------1', '2.test---------------2', '3.test---------------3', '4.test---------------4', '5.test---------------5', '6.test---------------6', '7.test---------------7', '8.test---------------8', '9.test---------------9', '10.test---------------10', '11.test---------------11', '12.test---------------12', '13.test---------------13', '14.test---------------14', '15.test---------------15'];
        var lineChartType = '1';

        var xAxisData_jsonstr = '["20181012","20181019","20181026","20181102","20181109","20181116","20181123","20181130","20181207","20181214","20181221","20181228","20190104","20190111","20190118","20190125","20190201","20190215","20190222","20190301","20190308","20190315","20190322","20190329","20190404","20190412","20190419","20190426","20190430","20190510","20190517","20190524","20190531","20190606","20190614","20190621","20190628","20190705","20190712","20190719","20190726","20190802","20190809","20190816","20190823","20190830","20190906","20190912","20190920","20190927","20190930","20191011","20191018","20191025","20191101","20191108","20191115","20191122","20191129","20191206","20191213","20191220","20191227","20200103","20200110","20200117","20200123","20200207","20200214","20200221","20200228","20200306","20200313","20200320","20200327","20200403","20200410","20200417","20200424","20200430","20200508","20200515","20200522","20200529","20200605","20200612","20200619","20200624","20200703","20200710","20200717","20200724","20200731","20200807","20200814","20200821","20200828","20200904","20200911","20200918","20200925","20200930","20201009","20201016","20201023","20201030","20201106","20201113","20201120","20201127","20201204","20201211","20201218","20201225"]';
        var xAxisData = JSON.parse(xAxisData_jsonstr);
        var showseries_jsonstr = '[{"name":"1.test---------------1","type":"line","data":[0,-0.63057,-1.28195,-1.76044,-2.84761,-1.92104,-3.50632,-2.33886,-2.32883,-2.5875,-4.81413,-5.20582,-5.62676,-4.32057,-4.13932,-4.017,-3.23517,-2.79285,-1.94082,2.49892,0.88333,2.32279,2.95447,4.61789,6.94581,6.35576,8.63304,5.70292,4.32744,1.48289,0.53766,-1.37149,-3.75149,-4.40498,-3.00871,0.24273,1.243,2.43638,1.44996,2.22188,3.64443,1.34323,0.57989,2.26123,2.78527,3.79937,5.3213,6.54651,6.23789,3.9566,3.92668,5.6399,4.89115,5.6463,6.72199,9.23629,7.30373,7.76023,7.13172,8.89068,11.21158,12.64843,14.59343,19.60554,20.05972,21.05032,19.81699,20.04898,22.20377,24.42976,19.86513,21.98162,14.95667,9.70639,12.23762,10.16487,13.92661,17.32621,18.23144,18.70532,19.93864,20.76442,21.47254,20.73258,24.42044,24.81703,29.84344,30.18439,37.75152,44.07868,41.73507,42.06797,47.27168,49.58055,47.09925,47.97148,51.12795,49.83075,48.0593,50.00197,43.56208,42.93886,46.54601,48.3078,48.29074,48.29074,48.29074,48.29074,48.29074,48.29074,48.29074,48.29074,48.29074,48.29074],"symbol":"circle","symbolSize":1},{"name":"2.test---------------2","type":"line","data":[0,0,0,0,0,0,0,0.25173,0.25173,0.25173,0.25173,-2.45919,-2.45919,-2.45919,-2.45919,-2.45919,-0.01806,-0.01806,-0.01806,9.66934,9.66934,9.66934,9.66934,15.46756,15.46756,15.46756,15.46756,15.46756,16.03543,16.03543,16.03543,16.03543,10.51169,10.51169,10.51169,10.51169,13.82841,13.82841,13.82841,13.82841,13.82841,13.32074,13.32074,13.32074,13.32074,14.94661,14.94661,14.94661,14.94661,14.94661,15.93985,15.93985,15.93985,15.93985,17.79447,17.79447,17.79447,17.79447,16.24734,16.24734,16.24734,16.24734,16.24734,23.57808,23.57808,23.57808,23.6783,23.6783,23.6783,23.6783,26.2646,26.2646,26.2646,26.2646,26.2646,20.72804,20.72804,20.72804,20.72804,26.06637,26.06637,26.06637,26.06637,28.42632,28.42632,28.42632,28.42632,28.42632,40.50443,40.50443,40.50443,40.50443,53.04428,53.04428,53.04428,53.04428,53.04428,56.02576,56.02576,56.02576,56.02576,48.05385,48.05385,48.05385,48.05385,49.77888,49.77888,49.77888,49.77888,49.77888,53.8751,53.8751,53.8751,53.8751],"symbol":"circle","symbolSize":1},{"name":"3.test---------------3","type":"line","data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"symbol":"circle","symbolSize":1},{"name":"4.test---------------4","type":"line","data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"symbol":"circle","symbolSize":1},{"name":"5.test---------------5","type":"line","data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"symbol":"circle","symbolSize":1},{"name":"6.test---------------6","type":"line","data":[0,0,0,0,0,0,0,0.88849,0.88849,0.88849,0.88849,0.5716,0.5716,0.5716,0.5716,0.5716,0.65016,0.65016,0.65016,2.10608,2.10608,2.10608,2.10608,4.59664,4.59664,4.59664,4.59664,4.59664,6.41907,6.41907,6.41907,6.41907,7.36426,7.36426,7.36426,7.36426,7.48488,7.48488,7.48488,7.48488,7.48488,7.4703,7.4703,7.4703,7.4703,7.80111,7.80111,7.80111,7.80111,7.80111,7.79562,7.79562,7.79562,7.79562,8.35914,8.35914,8.35914,8.35914,7.76317,7.76317,7.76317,7.76317,7.76317,8.17948,8.17948,8.17948,8.90164,8.90164,8.90164,8.90164,10.87425,10.87425,10.87425,10.87425,10.87425,11.93445,11.93445,11.93445,11.93445,12.76439,12.76439,12.76439,12.76439,14.03142,14.03142,14.03142,14.03142,14.03142,15.48786,15.48786,15.48786,15.48786,18.60399,18.60399,18.60399,18.60399,18.60399,19.78363,19.78363,19.78363,19.78363,19.22381,19.22381,19.22381,19.22381,19.88435,19.88435,19.88435,19.88435,19.88435,18.97144,18.97144,18.97144,18.97144],"symbol":"circle","symbolSize":1},{"name":"7.test---------------7","type":"line","data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"symbol":"circle","symbolSize":1},{"name":"8.test---------------8","type":"line","data":[0,0,0,0,0,0,0,1.14612,1.14612,1.14612,1.14612,0.49907,0.49907,0.49907,0.49907,0.49907,1.48249,1.48249,1.48249,2.23593,2.23593,2.23593,2.23593,2.41732,2.41732,2.41732,2.41732,2.41732,3.64872,3.64872,3.64872,3.64872,4.75526,4.75526,4.75526,4.75526,5.88363,5.88363,5.88363,5.88363,5.88363,5.40783,5.40783,5.40783,5.40783,6.62083,6.62083,6.62083,6.62083,6.62083,5.7952,5.7952,5.7952,5.7952,5.97906,5.97906,5.97906,5.97906,6.61686,6.61686,6.61686,6.61686,6.61686,8.11725,8.11725,8.11725,8.27175,8.27175,8.27175,8.27175,9.15363,9.15363,9.15363,9.15363,9.15363,11.44118,11.44118,11.44118,11.44118,11.5863,11.5863,11.5863,11.5863,13.01299,13.01299,13.01299,13.01299,13.01299,14.61845,14.61845,14.61845,14.61845,19.6221,19.6221,19.6221,19.6221,19.6221,20.54968,20.54968,20.54968,20.54968,20.39052,20.39052,20.39052,20.39052,21.69472,21.69472,21.69472,21.69472,21.69472,25.23992,25.23992,25.23992,25.23992],"symbol":"circle","symbolSize":1},{"name":"9.test---------------9","type":"line","data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"symbol":"circle","symbolSize":1},{"name":"10.test---------------10","type":"line","data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"symbol":"circle","symbolSize":1},{"name":"11.test---------------11","type":"line","data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"symbol":"circle","symbolSize":1},{"name":"12.test---------------12","type":"line","data":[0,0,0,0,0,0,0,-2.59585,-2.59585,-2.59585,-2.59585,-2.67621,-2.67621,-2.67621,-2.67621,-2.67621,0.37384,0.37384,0.37384,1.57861,1.57861,1.57861,1.57861,1.52091,1.52091,1.52091,1.52091,1.52091,3.50954,3.50954,3.50954,3.50954,4.11743,4.11743,4.11743,4.11743,5.48277,5.48277,5.48277,5.48277,5.48277,5.5231,5.5231,5.5231,5.5231,5.1543,5.1543,5.1543,5.1543,5.1543,5.09113,5.09113,5.09113,5.09113,5.06089,5.06089,5.06089,5.06089,5.49784,5.49784,5.49784,5.49784,5.49784,7.8412,7.8412,7.8412,6.78156,6.78156,6.78156,6.78156,4.25988,4.25988,4.25988,4.25988,4.25988,2.44883,2.44883,2.44883,2.44883,3.96918,3.96918,3.96918,3.96918,7.26506,7.26506,7.26506,7.26506,7.26506,8.74117,8.74117,8.74117,8.74117,13.05618,13.05618,13.05618,13.05618,13.05618,15.00761,15.00761,15.00761,15.00761,11.92503,11.92503,11.92503,11.92503,12.4317,12.4317,12.4317,12.4317,12.4317,17.28855,17.28855,17.28855,17.28855],"symbol":"circle","symbolSize":1},{"name":"13.test---------------13","type":"line","data":[0,-1.12848,0.09175,3.76947,-0.1035,2.7422,-1.97072,-1.05966,-0.7829,-1.27106,-5.52831,-6.11275,-5.32625,-3.48932,-1.20046,-0.69228,1.27012,4.11756,9.77495,16.93492,14.06168,16.78804,19.55716,20.75903,26.68074,24.38509,28.50125,21.28712,22.03357,16.3342,13.78667,12.07627,13.19504,11.16454,13.97748,19.56143,19.301,21.40959,18.77535,18.75114,20.32954,16.86392,13.31168,15.7132,19.15369,18.49015,23.13426,23.87873,22.73335,20.14506,18.95612,21.98721,20.6666,21.52154,23.25525,23.89841,20.90709,20.06215,19.39715,21.69594,23.74902,25.27809,25.427,29.26079,29.82898,29.56914,24.8617,21.61746,24.35752,29.40188,22.87044,29.05937,21.47534,13.92579,15.69825,15.79672,17.54184,19.73441,18.4086,22.01374,23.60556,22.02118,19.25345,20.59313,24.77901,24.83613,27.81824,29.07438,37.82508,48.22646,41.72648,40.50682,46.415,46.81667,46.71384,47.15712,51.06842,48.75928,44.3018,47.7261,42.51612,43.05793,45.98139,49.42843,47.14606,46.42398,52.3611,51.46091,54.15644,55.32516,57.98059,52.48307,55.924,57.2352],"symbol":"circle","symbolSize":1},{"name":"14.test---------------14","type":"line","data":[0,-3.50744,-1.0303,3.73794,2.1173,8.90736,2.26104,2.30514,3.10711,1.38069,-1.09612,-2.57126,-1.56981,0.86115,1.63103,0.94451,0.37948,5.2524,11.67037,18.44748,22.61937,25.26797,31.41873,29.67765,37.24891,33.57457,35.81421,26.4139,24.06537,18.37965,15.53386,13.17713,14.81908,9.3676,12.09647,17.37408,15.71851,17.87324,13.64018,14.04043,14.49437,12.43291,7.53423,10.39325,14.25577,14.22284,20.49077,22.54718,21.65596,17.00769,15.49469,18.17382,15.98334,16.74916,15.99603,16.60248,13.80081,14.63404,14.42036,17.1218,18.59853,21.19292,21.06478,25.77358,28.10154,28.79853,25.7059,24.52069,26.71248,35.20306,27.42513,34.73155,27.56332,22.0019,20.08645,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254,17.3254],"symbol":"circle","symbolSize":1},{"name":"15.test---------------15","type":"line","data":[0,0.27155,0.42108,0.61966,0.90438,1.34521,1.62396,1.72444,2.03368,2.16109,2.09888,2.33515,2.69703,3.27425,3.29757,3.43335,3.52307,3.93102,3.9406,3.68459,3.66248,3.72827,3.85988,4.15715,4.11946,4.00222,3.78988,3.92447,4.07759,4.62131,4.96822,4.70384,4.82826,5.0089,4.98079,5.00532,5.29441,5.63326,5.77489,5.89571,6.09663,6.36932,6.74699,6.98235,7.06741,7.17197,7.30744,7.37174,7.48162,7.52612,7.55501,7.78105,7.80131,7.779,7.6333,7.87828,8.0698,8.34543,8.49754,8.62789,8.73777,8.82803,9.00126,9.16838,9.39436,9.60066,9.75164,10.40715,10.73206,10.95259,11.21207,11.44685,11.3731,11.179,11.38722,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001,11.45001],"symbol":"circle","symbolSize":1}]';
        var showseries = JSON.parse(showseries_jsonstr);

        var gridBottom = '10%';

        var lineOption = {
            color: LINE_CHART_COLOR_ARR,
            legend: { //图例组件
                type:'scroll',
                show: true,
                data: showdata,
                itemHeight: 2,
                itemWidth: 24,
                type: 'plain',
                icon: 'rect',
                align: 'left',
                orient: 'horizontal',
                y: 'bottom'
            },
            tooltip: {
                trigger: 'axis',
                //      formatter: '{a}:{c}%'
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: calculateGridBottom(showdata),
                top: '5%',
                    containLabel: true
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: xAxisData,
                axisLabel: {
                    show:true,
                    inside:false,
                    margin:10,
                    showMinLabel:true,
                    showMaxLabel: true,
                    rotate: 40,
                    fontSize: 9,
                    color: '#000'
                },
                axisLine: {
                    lineStyle: {
                        color: '#888'
                    }
                }
            },
            yAxis: {
                type: 'value',
                axisTick: {
                    show: false
                },
                axisLine: {
                    lineStyle: {
                        color: '#888'
                    }
                },
                splitLine:{
                    lineStyle:{
                        color:'#888',
                        width:1
                    }
                },
                axisLabel: {
                    formatter: lineChartType == 1 ? '{value}%' : '{value}',
                    color: '#000'
                }

            },
            series:showseries
        };

        var myChart = $.ddchart.getProcessedEcharts('chart1');
        myChart.setOption(lineOption);

        // 不能直接像下面这样写
        /*var myChart = echarts.init(document.getElementById('chart1'));
        myChart.setOption(lineOption);*/
    }

    /**
     * 根据图例数量，计算图表到底部容器的距离
     * （解决图例过多时，图例与x坐标轴的标签会挤到一块的问题，在低分辨率电脑上会有这个问题）
     *
     * 下面的写法只是暂时解决了，目前还没找到有哪个属性能够直接控制图例跟图之间的距离的
     * 这里的gridBottom其实是，图到容器底部的距离
     * @param showdata
     */
    function calculateGridBottom(showdata) {
        var gridBottom;
        if (showdata.length >= 15) {
            gridBottom = '15%';
        } else {
            gridBottom = '10%'
        }
        return gridBottom;
    }

    return {
        generateChart
    }
}();